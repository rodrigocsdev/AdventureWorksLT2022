{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/product.service\";\nimport * as i2 from \"@angular/common\";\nfunction HomeComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"A carregar produtos...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Nenhum produto encontrado.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.errorMessage);\n  }\n}\nfunction HomeComponent_div_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", product_r5.Name, \" - \", i0.ɵɵpipeBind3(2, 2, product_r5.ListPrice, \"USD\", \"symbol\"), \" \");\n  }\n}\nfunction HomeComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, HomeComponent_div_3_div_1_Template, 3, 6, \"div\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.products);\n  }\n}\nexport class HomeComponent {\n  constructor(productService) {\n    this.productService = productService;\n    this.products = []; // Array de produtos\n    this.loading = false; // Indicador de carregamento\n    this.errorMessage = null; // Mensagem de erro (se houver)\n  }\n\n  fetchProducts() {\n    this.loading = true;\n    this.errorMessage = null;\n    this.productService.getProducts().subscribe({\n      next: data => {\n        console.log('Dados recebidos da API:', data);\n        // Verifica se a resposta é um objeto e não uma lista\n        if (data && data.productID) {\n          this.products = [data]; // Coloca o produto dentro de um array\n        } else {\n          console.error('Estrutura inesperada dos dados:', data);\n          this.products = []; // Garante que é um array vazio em caso de erro\n        }\n\n        this.loading = false;\n      },\n      error: error => {\n        console.error('Erro ao buscar produtos:', error);\n        this.errorMessage = 'Erro ao carregar produtos.';\n        this.loading = false;\n      }\n    });\n  }\n  // Chamado quando o componente é inicializado\n  ngOnInit() {\n    console.log('Componente Home carregado');\n    this.fetchProducts(); // Inicia a busca de produtos\n  }\n}\n\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n};\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 4,\n  vars: 4,\n  consts: [[4, \"ngIf\"], [\"class\", \"error\", 4, \"ngIf\"], [1, \"error\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, HomeComponent_div_0_Template, 2, 0, \"div\", 0);\n      i0.ɵɵtemplate(1, HomeComponent_div_1_Template, 2, 0, \"div\", 0);\n      i0.ɵɵtemplate(2, HomeComponent_div_2_Template, 2, 1, \"div\", 1);\n      i0.ɵɵtemplate(3, HomeComponent_div_3_Template, 2, 1, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.products.length === 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.products.length > 0);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i2.CurrencyPipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":";;;;;IAAAA,2BAAqB;IAAAA,sCAAsB;IAAAA,iBAAM;;;;;IACjDA,2BAA+C;IAAAA,0CAA0B;IAAAA,iBAAM;;;;;IAC/EA,8BAAwC;IAAAA,YAAkB;IAAAA,iBAAM;;;;IAAxBA,eAAkB;IAAlBA,yCAAkB;;;;;IAGtDA,2BAAsC;IAClCA,YACJ;;IAAAA,iBAAM;;;;IADFA,eACJ;IADIA,oHACJ;;;;;IAHJA,2BAA6C;IACzCA,oEAEM;IACVA,iBAAM;;;;IAHuBA,eAAW;IAAXA,yCAAW;;;ACGxC,OAAM,MAAOC,aAAa;EAKxBC,YAAoBC,cAA8B;IAA9B,mBAAc,GAAdA,cAAc;IAJlC,aAAQ,GAAc,EAAE,CAAC,CAAC;IAC1B,YAAO,GAAG,KAAK,CAAC,CAAC;IACjB,iBAAY,GAAkB,IAAI,CAAC,CAAC;EAEkB;;EAEtDC,aAAa;IACX,IAAI,CAACC,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,YAAY,GAAG,IAAI;IAExB,IAAI,CAACH,cAAc,CAACI,WAAW,EAAE,CAACC,SAAS,CAAC;MAC1CC,IAAI,EAAGC,IAAS,IAAI;QAClBC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEF,IAAI,CAAC;QAC5C;QACA,IAAIA,IAAI,IAAIA,IAAI,CAACG,SAAS,EAAE;UAC1B,IAAI,CAACC,QAAQ,GAAG,CAACJ,IAAI,CAAC,CAAC,CAAC;SACzB,MAAM;UACLC,OAAO,CAACI,KAAK,CAAC,iCAAiC,EAAEL,IAAI,CAAC;UACtD,IAAI,CAACI,QAAQ,GAAG,EAAE,CAAC,CAAC;;;QAEtB,IAAI,CAACT,OAAO,GAAG,KAAK;MACtB,CAAC;MACDU,KAAK,EAAGA,KAAK,IAAI;QACfJ,OAAO,CAACI,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAChD,IAAI,CAACT,YAAY,GAAG,4BAA4B;QAChD,IAAI,CAACD,OAAO,GAAG,KAAK;MACtB;KACD,CAAC;EACJ;EAIA;EACAW,QAAQ;IACNL,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;IACxC,IAAI,CAACR,aAAa,EAAE,CAAC,CAAC;EACxB;;;AArCWH,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAAgB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDR1BrB,8DAAiD;MACjDA,8DAA+E;MAC/EA,8DAAgE;MAEhEA,8DAIM;;;MARAA,kCAAa;MACbA,eAAuC;MAAvCA,gEAAuC;MACvCA,eAAkB;MAAlBA,uCAAkB;MAElBA,eAAqC;MAArCA,8DAAqC","names":["i0","HomeComponent","constructor","productService","fetchProducts","loading","errorMessage","getProducts","subscribe","next","data","console","log","productID","products","error","ngOnInit","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\rodri\\source\\repos\\AdventureWorksLT2022\\ClientApp\\src\\app\\home\\home.component.html","C:\\Users\\rodri\\source\\repos\\AdventureWorksLT2022\\ClientApp\\src\\app\\home\\home.component.ts"],"sourcesContent":["<div *ngIf=\"loading\">A carregar produtos...</div>\r\n<div *ngIf=\"!loading && products.length === 0\">Nenhum produto encontrado.</div>\r\n<div *ngIf=\"errorMessage\" class=\"error\">{{ errorMessage }}</div>\r\n\r\n<div *ngIf=\"!loading && products.length > 0\">\r\n    <div *ngFor=\"let product of products\">\r\n        {{ product.Name}} - {{ product.ListPrice| currency:'USD':'symbol' }}\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ProductService } from '../service/product.service';\r\nimport { Product } from '../models/product.model';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  products: Product[] = []; // Array de produtos\r\n  loading = false; // Indicador de carregamento\r\n  errorMessage: string | null = null; // Mensagem de erro (se houver)\r\n\r\n  constructor(private productService: ProductService) { }\r\n\r\n  fetchProducts(): void {\r\n    this.loading = true;\r\n    this.errorMessage = null;\r\n\r\n    this.productService.getProducts().subscribe({\r\n      next: (data: any) => {\r\n        console.log('Dados recebidos da API:', data);\r\n        // Verifica se a resposta é um objeto e não uma lista\r\n        if (data && data.productID) {\r\n          this.products = [data]; // Coloca o produto dentro de um array\r\n        } else {\r\n          console.error('Estrutura inesperada dos dados:', data);\r\n          this.products = []; // Garante que é um array vazio em caso de erro\r\n        }\r\n        this.loading = false;\r\n      },\r\n      error: (error) => {\r\n        console.error('Erro ao buscar produtos:', error);\r\n        this.errorMessage = 'Erro ao carregar produtos.';\r\n        this.loading = false;\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n\r\n  // Chamado quando o componente é inicializado\r\n  ngOnInit(): void {\r\n    console.log('Componente Home carregado');\r\n    this.fetchProducts(); // Inicia a busca de produtos\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}